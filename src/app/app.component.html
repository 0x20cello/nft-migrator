<div class="header">
  <span>NFT Migrator</span>
  <span class="pull-right address" *ngIf="selectedAddress">{{selectedAddress}}</span>
  <span class="pull-right audioCtrl" (click)="audioCtrlClick()" id="audioCtrl" title="Salome De Bahia - Festa Para Um Rei Negro">
    <img src="assets/images/audio.gif">
  </span>
</div>

<div *ngIf="metamaskError">
  Questa pagina usa il Web3, installare Metamask.
</div>
<div *ngIf="!metamaskError">
  <div class="container-fluid">
    <div class="row wizard-container">
      <mat-card class="col-xs-8 col-xs-offset-2" style="min-height: 400px;">
        <img class="parrot"  src="assets/images/parrot.png">
        <mat-stepper linear #stepper>
          <mat-step [editable]="false">
            <form>
              <ng-template matStepLabel>Source wallet</ng-template>
              <p>
                <span *ngIf="selectedAddress; else connectSourceButtons">{{selectedAddress}}</span>
                <ng-template #connectSourceButtons>
                  <div class="row">
                    <div class="col-xs-4">
                      <mat-card>
                        <img style="max-width: 100%;" (click)="connectToWallet()" src="https://cdn.techozu.com/wp/2021/08/How-to-Install-and-Set-Up-MetaMask-on-PC-and-Mobile.jpg">
                      </mat-card>
                    </div>
                    <div class="col-xs-4">
                      <mat-card class="disabled">
                        <img style="max-width: 100%;" (click)="connectToWallet()" src="https://bsctimes.com/wp-content/uploads/2021/07/photo_2021-07-13-16.27.25.jpeg">
                      </mat-card>
                    </div>
                  </div>
                </ng-template>
              </p>
              <button class="pull-right" *ngIf="selectedAddress" (click)="getNfts()" mat-button matStepperNext>Next</button>
            </form>
          </mat-step>
          <mat-step [editable]="false">
            <ng-template matStepLabel>Select your NFTs</ng-template>
            <form *ngIf="nftList && nftList.result && nftList.result.length > 0; else noNft">
              
              <div class="row nft-list">
                <div class="col-xs-3" *ngFor="let nft of nftList.result">
                  <mat-card class="nft-item">
                      <p><b>{{nft.name}}</b></p>
                      <p>
                        <small>ID: {{nft.token_id}}</small>
                      </p>
                      <p>
                        <small>Symbol: {{nft.symbol}}</small>
                      </p>
                  </mat-card>
                </div>
              </div>
              <div>
                <button mat-button matStepperNext class="pull-right">Next</button>
              </div>
            </form>
            <ng-template #noNft>
              The connected wallet has no NFTs available.
            </ng-template>
          </mat-step>
          <mat-step>
            <ng-template matStepLabel>Migrate</ng-template>
            <p>You are now done.</p>
            <div>
              <button mat-button (click)="stepper.reset()">Reset</button>
            </div>
          </mat-step>
        </mat-stepper>
      </mat-card>
    </div>
  </div>
</div>
