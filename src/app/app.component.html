<div class="header">
  <div class="logo pull-left">NFT Expat<br><small>funky nft migrator</small></div>
  <span class="pull-right address" *ngIf="selectedAddress">{{selectedAddress}}</span>
  <span class="pull-right audioCtrl cursor-pointer" (click)="audioCtrlClick()" id="audioCtrl"
    title="Salome De Bahia - Festa Para Um Rei Negro">
    <img src="assets/images/audio.gif">
  </span>
</div>

<div class="overlay" *ngIf="showOverlay" @fadeOut (keydown)="start()" tabindex="0">
  <img (click)="start()" class="cursor-pointer"
    src="http://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/97152d7a3bad9b7.png">
</div>

<div *ngIf="metamaskError">
  Questa pagina usa il Web3, installare Metamask.
</div>
<div *ngIf="!metamaskError">
  <div class="container-fluid">
    <div class="row wizard-container">
      <mat-card class="col-lg-6 col-lg-offset-3 col-md-10 col-md-offset-1 col-xs-12 col-xs-offset-0" style="min-height: 400px;">
        <img class="parrot" src="assets/images/parrot.png">
        <mat-stepper linear #stepper>
          <mat-step [editable]="false">
            <form>
              <ng-template matStepLabel>Source wallet</ng-template>
              <div class="text-center" *ngIf="selectedAddress; else connectSourceButtons">
                <p>
                  You are now connected as: <br>
                </p>
                <h2>{{selectedAddress}}</h2>
                <div *ngIf="nftList && nftList.result && nftList.result.length > 0; else noNft">
                  <p> 
                    We have detected <span><b>{{nftList.result.length}}</b></span> NFTs in your wallet. 
                  </p></div>
                <ng-template #noNft>
                  You still don't have any NFTs in your wallet. <br>You can keep hanging out here as much as you want, don't worry.<br><br><br><br>
                  <small>You should really consider getting some though, they are quite the hype right now.</small>
                </ng-template>
              </div>
              <ng-template #connectSourceButtons>
                <div class="row">
                  <div class="col-xs-4">
                    <mat-card class="cursor-pointer">
                      <img style="max-width: 100%;" (click)="connectToWallet()"
                        src="https://cdn.techozu.com/wp/2021/08/How-to-Install-and-Set-Up-MetaMask-on-PC-and-Mobile.jpg">
                    </mat-card>
                  </div>
                  <div class="col-xs-4">
                    <mat-card class="disabled">
                      <img style="max-width: 100%;" (click)="connectToWallet()"
                        src="https://bsctimes.com/wp-content/uploads/2021/07/photo_2021-07-13-16.27.25.jpeg">
                    </mat-card>
                  </div>
                </div>
              </ng-template>
              <div class="form-actions text-right">
                <button *ngIf="selectedAddress && nftList && nftList.result && nftList.result.length > 0" mat-button
                  matStepperNext>Next</button>
              </div>
            </form>
          </mat-step>
          <mat-step [editable]="false">
            <ng-template matStepLabel>Select your NFTs</ng-template>
            <form *ngIf="nftList && nftList.result && nftList.result.length > 0; else noNft">

              <div class="row nft-list">
                <div class="col-xs-3" *ngFor="let nft of nftList.result">
                  <mat-card class="nft-item">
                    <p><b>{{nft.name}}</b></p>
                    <p>
                      <small>ID: {{nft.token_id}}</small>
                    </p>
                    <p>
                      <small>Symbol: {{nft.symbol}}</small>
                    </p>
                  </mat-card>
                </div>
              </div>
              <div class="form-actions text-right">
                <button mat-button matStepperNext class="pull-right">Next</button>
              </div>
            </form>
            <ng-template #noNft>
              The connected wallet has no NFTs available.
            </ng-template>
          </mat-step>
          <mat-step>
            <ng-template matStepLabel>Migrate</ng-template>
            <p>You are now done.</p>
            <div>
              <button mat-button (click)="stepper.reset()">Reset</button>
            </div>
          </mat-step>
        </mat-stepper>
      </mat-card>
    </div>
  </div>
</div>
